

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cylarim overview &mdash; lipsia  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="vcylarim" href="vcylarim.html" />
    <link rel="prev" title="Installation" href="../install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            lipsia
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#lipsia-file-format">Lipsia file format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#laminar-specific-fmri-analysis-cylarim">Laminar-specific fMRI analysis (Cylarim)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#statistical-inference-lisa-in-examples">Statistical inference (LISA) in examples:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#semi-blind-machine-learning-sml">Semi-blind machine learning (SML):</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#how-to-install-lipsia-using-singularity">How to install LIPSIA using Singularity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#install-lipsia-from-source-linux-unix-macos">Install LIPSIA from source (Linux/Unix/MacOS)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#install-the-necessary-compilers-and-libraries">1) Install the necessary compilers and libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#ubuntu">Ubuntu:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#fedora">Fedora:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#macos">MacOS:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#clone-the-git-repository">2) Clone the git repository:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#execute-the-script-lipsia-setup-sh-in-a-shell">3) Execute the script “lipsia-setup.sh” (in a shell)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#compile-lipsia">4) Compile lipsia</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#change-bash-profile">5) Change bash profile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#install-lipsia-using-docker">Install LIPSIA using Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#install-docker-on-your-local-machine">1) Install docker on your local machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#build-the-dockerfile">3) Build the Dockerfile</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Laminar-specific fMRI (Cylarim)</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cylarim overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#initial-steps">Initial steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-main-steps">The main steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-workflow-1">Example workflow 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-workflow-2">Example workflow 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contents">Contents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vcylarim.html">vcylarim</a></li>
<li class="toctree-l3"><a class="reference internal" href="vcylarim.html#further-analyses">Further Analyses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vcylarim.html#parameters-of-vcylarim">Parameters of ‘vcylarim’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vcylarim_probe.html">vcylarim_probe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vcylarim_probe.html#parameters-of-vcylarim-probe">Parameters of ‘vcylarim_probe’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vcylarim_roi.html">vcylarim_roi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vcylarim_roi.html#example">Example:</a></li>
<li class="toctree-l4"><a class="reference internal" href="vcylarim_roi.html#parameters-of-vcylarim-roi">Parameters of ‘vcylarim_roi’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vcylarim_seed.html">vcylarim_seed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vcylarim_seed.html#example">Example:</a></li>
<li class="toctree-l4"><a class="reference internal" href="vcylarim_seed.html#parameters-of-vcylarim-seed">Parameters of ‘vcylarim_seed’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vfdr.html">vfdr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vfdr.html#example">Example:</a></li>
<li class="toctree-l4"><a class="reference internal" href="vfdr.html#parameters-of-vfdr">Parameters of ‘vfdr’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vrim.html">vrim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vrim.html#example">Example:</a></li>
<li class="toctree-l4"><a class="reference internal" href="vrim.html#parameters-of-vrim">Parameters of ‘vrim’</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vmetric.html">vmetric</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vmetric.html#example">Example:</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmetric.html#parameters-of-vmetric">Parameters of ‘vmetric’</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim.html">vcylarim</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim.html#further-analyses">Further Analyses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vcylarim.html#parameters-of-vcylarim">Parameters of ‘vcylarim’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim_getmask.html">vcylarim_getmask</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vcylarim_getmask.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="vcylarim_getmask.html#parameters-of-vcylarim-getmask">Parameters of ‘vcylarim_getmask’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vmetric.html">vmetric</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vmetric.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="vmetric.html#parameters-of-vmetric">Parameters of ‘vmetric’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vrim.html">vrim</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vrim.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrim.html#parameters-of-vrim">Parameters of ‘vrim’</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LISA statistical inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_generic.html">LISA generic framework (vlisa_generic)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_generic.html#parameters-of-vlisa-generic">Parameters of ‘vlisa_generic’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_generic.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_2ndlevel.html">LISA second-level GLM (vlisa_2ndlevel)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_2ndlevel.html#parameters-of-vlisa-2ndlevel">Parameters of ‘vlisa_2ndlevel’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_2ndlevel.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_onesample.html">LISA onesample test (vlisa_onesample)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_onesample.html#parameters-of-vlisa-onesample">Parameters of ‘vlisa_onesample’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_onesample.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_twosample.html">LISA twosample test (vlisa_twosample)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_twosample.html#parameters-of-vlisa-twosample">Parameters of ‘vlisa_twosample’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_twosample.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_precoloring.html">LISA single subject analysis using precoloring (vlisa_precoloring)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_precoloring.html#parameters-of-vlisa-precoloring">Parameters of ‘vlisa_precoloring’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_precoloring.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/vlisa_prewhitening.html">LISA single subject analysis using prewhitening (vlisa_prewhitening)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/vlisa_prewhitening.html#parameters-of-vlisa-prewhitening">Parameters of ‘vlisa_prewhitening’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../stats/vlisa_prewhitening.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Semi-blind machine learning (SML):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sml/vsml.html">Semi-blind machine learning - ensemble learning (SML-EL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sml/vsml.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sml/vsml.html#parameters-of-vsml">Parameters of ‘vsml’:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sml/vsml.html#reference">Reference:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sml/vreadconnectome.html">Reading data for use in Semi-blind machine learning (SML-EL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sml/vreadconnectome.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sml/vreadconnectome.html#parameters-of-vreadconnectome">Parameters of ‘vreadconnectome’:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sml/vsml_statistics.html">Semi-blind machine learning - ensemble learning (SML-EL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sml/vsml_statistics.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sml/vsml_statistics.html#parameters-of-vsml">Parameters of ‘vsml’:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sml/vsml_statistics.html#reference">Reference:</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Task-related edge density (TED)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ted/vcuttrials.html">Cut functional data into trials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ted/vcuttrials.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ted/vcuttrials.html#parameters-of-vcuttrials">Parameters of ‘vcuttrials’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ted/vted.html">Task-based edge density (TED)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ted/vted.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ted/vted.html#parameters-of-vted">Parameters of ‘vted’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ted/vhubness.html">Hubness maps resulting from TED</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ted/vhubness.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ted/vhubness.html#parameters-of-vhubness">Parameters of ‘vhubness’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ted/vtedfdr.html">False discovery rates in TED</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ted/vtedfdr.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ted/vtedfdr.html#parameters-of-vtedfdr">Parameters of ‘vtedfdr’</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nets/vbcm.html">Bipartite connectivity mapping (BCM)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../nets/vbcm.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nets/vbcm.html#parameters-of-vbcm">Parameters of ‘vbcm’</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nets/vbcm.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nets/vccm.html">Connectivity concordance mapping (CCM)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../nets/vccm.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nets/vccm.html#parameters-of-vccm">Parameters of ‘vccm’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nets/vecm.html">Eigenvector centrality mapping (ECM)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../nets/vecm.html#example">Example:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nets/vecm.html#parameters-of-vecm">Parameters of ‘vecm’</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nets/vecm.html#references">References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Preprocessing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prep/vdetrend.html">Detrending</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../prep/vdetrend.html#parameters-of-vdetrend">Parameters of ‘vdetrend’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../prep/vpreprocess.html">Spatial smoothing and temporal filtering</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../prep/vpreprocess.html#parameters-of-vpreprocess">Parameters of ‘vpreprocess’</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File format converters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../conv/vdicom.html">Convert from dicom files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../conv/vdicom.html#parameters-of-vdicom">Parameters of ‘vdicom’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../conv/vnifti.html">Convert to/from nifti files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../conv/vnifti.html#parameters-of-vnifti">Parameters of <em>vnifti</em></a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../utils/vapplymask.html">Masking an image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../utils/vapplymask.html#parameters-of-vapplymask">Parameters of ‘vapplymask’</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/vdenoise.html">Denoising</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/vsrad.html">Speckle filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stats/designformat.html">Design file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stats/designformat_first.html">First level design files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stats/designformat_higher.html">Higher-level  level design files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stats/designformat_higher.html#one-sample-test">One-sample test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats/designformat_higher.html#two-sample-test">Two-sample test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats/designformat_higher.html#paired-test">Paired test</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stats/designformat_higher.html#anova-interactions-and-main-effects-repeated-measures">ANOVA (interactions and main effects, repeated measures)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">lipsia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Cylarim overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cylarim/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cylarim-overview">
<h1>Cylarim overview<a class="headerlink" href="#cylarim-overview" title="Link to this heading"></a></h1>
<p>Cylarim is an innovative software package for laminar fMRI analysis that
addresses a major limitation of many existing approaches: their reliance on pre-defined regions of interest (ROIs).
The definition of ROIs often involves arbitrary choices,
making them difficult to justify and prone to bias.
To overcome this problem, Cylarim utilizes small, overlapping cylinders that traverse the cortical ribbon,
enabling a comprehensive mapping of laminar-specific activity across extensive cortical regions.</p>
<section id="initial-steps">
<h2>Initial steps<a class="headerlink" href="#initial-steps" title="Link to this heading"></a></h2>
<p>Cylarim assumes the availability of high-precision segmentations of grey matter, white matter,
and cerebrospinal fluid (CSF) with a spatial resolution of approximately 0.2mm.
Data with lower resolution should be upsampled accordingly.</p>
<p>The initial processing steps are similar to the LayNii software package (Huber et al., 2021).
Specifically, we extract cortical rims delineating the boundaries between CSF and white matter.
Subsequently, we derive a normalized ‘metric’ image representing cortical depth, scaled to the range [0,1].
Cylrim offers two programs for this purpose: <strong>vrim</strong> and <strong>vmetric</strong>.
The outputs of LayNii may be used as well. Note that it is mandatory that the resulting “rim” image
uses the following codes: 1(CSF-GM boundary), 2(WM-GM boundary), 3(GM interior),
with GM(grey matter), WM(white matter), and CSF(cerebral spinal fluid).</p>
</section>
<section id="the-main-steps">
<h2>The main steps<a class="headerlink" href="#the-main-steps" title="Link to this heading"></a></h2>
<p><strong>vcylarim</strong> is the core tool in this package.
It first constructs cortical cylinders by connecting pairs of voxels:
one on the gray matter GM/WM rim and the other on the GM/CSF rim.
Voxel pairs are identified by finding the nearest neighbor on the opposite rim for each voxel.
After excluding redundant pairs, cylinders are defined by dilating the line connecting each pair of
voxels with a user-specified radius (typically 2mm).</p>
<p>After the cylinders have been constructed, vcylarim analyses activation profiles using
various methods. For example, vcylarim can be instructed to compute three depth strata (deep, middle, superficial),
and perform pairwise t-tests to compare them. Alternatively, it can be instructed to identify
peaks in the cortical profiles, or identify regions where the profile is concave up or down.
The output of <strong>vcylarim</strong> is a set of files depending on the various type of analysis selected by the user.</p>
<p>The output files are 4D images that can be further processed using the program <strong>vcylarim_probe</strong>.</p>
<p>The input images can be either in Lipsia’s own ‘vista’-format (<em>.v), or in nifti-format (</em>.nii).
The output images are always in ‘vista’-format. They can be visualized using the viewer
<strong>vini</strong> (github.com/MPI-Neuroinformatics/vini), or converted to nifti using the program <strong>vnifti</strong>
and visualized using other neuroimaging tools.</p>
<p>Some typical workflows are shown below.</p>
</section>
<section id="example-workflow-1">
<h2>Example workflow 1<a class="headerlink" href="#example-workflow-1" title="Link to this heading"></a></h2>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vrim</span> <span class="o">-</span><span class="ow">in</span> <span class="n">segmentation</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span>

<span class="n">vmetric</span> <span class="o">-</span><span class="ow">in</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">metric</span><span class="o">.</span><span class="n">v</span>

<span class="n">vcylarim</span> <span class="o">-</span><span class="ow">in</span> <span class="n">zmap</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">rim</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">metric</span> <span class="n">metric</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">radius</span> <span class="mi">2</span> <span class="o">-</span><span class="mi">3</span><span class="n">bins</span> <span class="n">true</span> <span class="o">-</span><span class="n">nperm</span> <span class="mi">1000</span> <span class="o">-</span><span class="n">out</span> <span class="n">cyl</span>

<span class="n">vcylarim_probe</span> <span class="o">-</span><span class="ow">in</span> <span class="n">cyl_3bins_zvals</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">result</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="nb">type</span> <span class="n">bottom_m</span>

<span class="n">vfdr</span> <span class="o">-</span><span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">result_fdrcorrected</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">alpha</span> <span class="mf">0.01</span>

<span class="n">vnifti</span> <span class="o">-</span><span class="ow">in</span> <span class="n">result_fdrcorrected</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">result_fdrcorrected</span><span class="o">.</span><span class="n">nii</span>
</pre></div>
</div>
</div></blockquote>
<p>In this example, the cortical ribbon is divided into three depth strata (‘deep’, ‘middle’, ‘superficial’),
and two-sample tests are performed to obtain three contrasts:
deep-middle, deep-superficial, and middle-superficial.
Z-values uncorrected for multiple comparisons
are obtained using permutation tests by randomly reassigning cortical depth values.</p>
<p>The program <strong>vcylarim_probe</strong> then
identifies predominant deep layer activations (‘-type bottom_m’) using a conjunction analysis
in which the conjunction between the contrasts ‘deep-middle’ and ‘deep-superficial’
is computed.
Finally, the resulting map is corrected for the false discovery rate (FDR) using a significance level of 0.01.
The output image can be visualized either using the program <strong>vini</strong> or converted to
nifti and visualized using other imaging software.</p>
</section>
<section id="example-workflow-2">
<h2>Example workflow 2<a class="headerlink" href="#example-workflow-2" title="Link to this heading"></a></h2>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vrim</span> <span class="o">-</span><span class="ow">in</span> <span class="n">segmentation</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span>

<span class="n">vmetric</span> <span class="o">-</span><span class="ow">in</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">metric</span><span class="o">.</span><span class="n">v</span>

<span class="n">vcylarim</span> <span class="o">-</span><span class="ow">in</span> <span class="n">zmap</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">rim</span> <span class="n">rim</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">metric</span> <span class="n">metric</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">radius</span> <span class="mi">2</span> <span class="o">-</span><span class="n">peaks</span> <span class="n">true</span> <span class="o">-</span><span class="n">out</span> <span class="n">cyl</span>

<span class="n">vnifti</span> <span class="o">-</span><span class="ow">in</span> <span class="n">cyl_peaks_coeff</span><span class="o">.</span><span class="n">v</span> <span class="o">-</span><span class="n">out</span> <span class="n">cyl_peaks_coeff</span><span class="o">.</span><span class="n">nii</span>
</pre></div>
</div>
</div></blockquote>
<p>In this example, the locations of peaks and valleys are estimated in each cylinder.
It involves fitting a fourth-order Chebyshev polynomial to the z-values within each cylinder
using a least-squares approach.
The largest and smallest points of the fitted curve within the interval [0,1] are then
identified and reported as the output.
The resulting file “cyl_peaks_coeff.v” contains two volumes. The first volume
shows the location of valleys, the second shows the location of peaks.</p>
<section id="reference">
<h3>Reference:<a class="headerlink" href="#reference" title="Link to this heading"></a></h3>
<blockquote>
<div><p>Lohmann, G. et al (2025), bioRxiv, Beyond ROIs: Laminar fMRI Mapping with Cylarim, <a class="reference external" href="https://doi.org/10.1101/2025.03.25.645237">https://doi.org/10.1101/2025.03.25.645237</a></p>
</div></blockquote>
</section>
</section>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="vcylarim.html">vcylarim</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim.html#further-analyses">Further Analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim_probe.html">vcylarim_probe</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim_roi.html">vcylarim_roi</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcylarim_seed.html">vcylarim_seed</a></li>
<li class="toctree-l1"><a class="reference internal" href="vfdr.html">vfdr</a></li>
<li class="toctree-l1"><a class="reference internal" href="vrim.html">vrim</a></li>
<li class="toctree-l1"><a class="reference internal" href="vmetric.html">vmetric</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vcylarim.html" class="btn btn-neutral float-right" title="vcylarim" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Gabriele Lohmann.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>